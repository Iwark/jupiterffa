<HTML>
<HEAD>
<TITLE>[CJ-Club]-[CGI]-[BBS]-Child Tree</TITLE>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=Shift_JIS">
<STYLE TYPE="text/css">
<!--
A:link { text-decoration:none; }
A:visited { text-decoration:none; }
A:hover { color:#F0764D; text-decoration:underline; }
BODY,TD{ font-family:"MS UI Gothic"; font-size:10pt; }
H3 { font-family:"Verdana"; font-size:13pt; color:#63C97C; }
B,TH { font-family:"ＭＳ Ｐゴシック"; font-size:10pt; }
PRE {color:#0000ff}
DIV {background-color:#A3E9B8;font-size:10pt;}
-->
</STYLE>
<META NAME=GENERATOR CONTENT="HOTALL Ver.4.0W">
</HEAD>
<BODY BGCOLOR="#fff8b9" TEXT="#3a3a3a" LINK="#0000ff" VLINK="#49a732">
<P>
<A NAME="top"><CENTER><TABLE>
<TR>
<TD>
<H3>

</H3>
</TD>
<TD>
<H3>
Child Tree
</H3>
</TD></TR></TABLE>マルチファイルアップ掲示板</CENTER><BR>
<DIV ALIGN=LEFT><B>■ 目次</B></DIV><BR>
</P>
<UL>
<A HREF="#ts">1 特徴とサンプル</A><BR>
<UL>
<A HREF="#s">1-1 動作サンプル</A><BR>
</UL>
<A HREF="#dl">2 ダウンロードと規約</A><BR>
<A HREF="#file">3 ファイル確認</A><BR>
<A HREF="#set">4 設定変更</A><BR>
<A HREF="#test">5 サーバに送る(テスト設置)</A><BR>
<A HREF="#hed">6 記事タイトルのヘッダ表示</A><BR>
<A HREF="#cb">7 解決済みチェックボックスの使用法</A><BR>
<A HREF="#log">8 過去ログ機能</A><BR>
<A HREF="#mail">9 メール通知機能</A><BR>
<A HREF="#titile">10 タイトルを画像にする</A><BR>
<A HREF="#count">11カウンタを画像にする</A><BR>
<A HREF="#tag">12 タグを使用可能にする</A><BR>
<A HREF="#backup">13 バックアップ機能を使う</A><BR>
<A HREF="#fileup">14 ファイルアップ機能を使う</A><BR>
<A HREF="#hrank">15 発言ランク機能を使う</A><BR>
<A HREF="#multi">16 マルチ設定機能を使う</A><BR>
<A HREF="#icon">17 アイコン機能と文字色・枠線色選択機能</A><BR>
<A HREF="#etc">18 その他</A><BR>
</UL>
<P>
<A NAME="ts"><DIV ALIGN=LEFT><B>■ 特徴とサンプル</B> <A HREF="#top">▲</A></DIV><BR>
</P>
<UL>
<LI><B>ツリー形式、トピック形式、スレッド形式の掲示板</B><BR>
<UL>
どれを使うか指定でき、また3つ同時にも使用できる。<BR>
<BR>
ツリー、トピック、スレッド表示の使い分けの仕方<BR>
<UL>
<LI>「ツリー」…記事を木の枝分かれのように表示します。話の流れが分かり易いのが特徴です。<BR>
<LI>「トピック」…記事を話題ごとに表示します。ひとつの話題の多くの記事をスムーズに読む事が可能です。<BR>
<LI>「スレッド」…最初から記事内容を表示します。一度に多くの話題に目を通すことができます。<BR>
ということで、レスが比較的少量で(30件以内ぐらい)、話の流れが重要な場合はツリー表示を、 <BR>
レスが大量に付くことが予想される場合はトピック表示、 <BR>
比較的書き込みが少ない場合はスレッド表示を初期状態にしておくことを進めます。<BR>
特に大量にレスが付くことが予想される場合(100件以上ぐらい)はツリー表示はOFFにしたほうがいい場合もあります。<BR>
<BR>
</UL>
</UL>
<LI><B>管理者・投稿者とも、記事の削除・編集が可能</B><BR>
<UL>
管理者は管理モードから、記事の削除・編集が可能。<BR>
投稿者は投稿時に記述した削除キーを用いることによって削除･編集が可能<BR>
レス記事の無い記事は完全の削除されレス記事のある記事はツリー保持のため記事の跡が残ります。<BR>
また、設定によって、編集された記事にタイムスタンプを付加することも可能です。<BR>
<BR>
</UL>
<LI><B>親/レス記事ファイルアップ機能</B> (ON/OFF可)<BR>
<UL>
親記事投稿時、返信記事投稿時、ローカル(自分のPC内)にあるファイルを記事に添付してアップロードすることが可能です。<BR>
また、アップロードし忘れたり、間違えてアップロードしてしまった場合、編集から、ファイルの削除･アップ可能です。<BR>
管理のことも考慮して、ひとつのスレッドあたりの最大ファイル容量の設定や、ファイルの表示許可を確認してから与えることも可能です。<BR>
この機能を応用した、管理者がメッセージ内容を確認してから表示許可を与える機能も搭載しています。<BR>
*) ファイルアップ方法は<A HREF="http://tohoho.wakusei.ne.jp/">とほほ</A>さんのWWWUPLを参考にしています。<BR>
<BR>
</UL>
<LI><B>cookie対応</B><BR>
<UL>
当然ながら、cookie対応。書き込んだ際の一部の項目を投稿者のPCに保存、次回書き込み時に手間を省きます。<BR>
<BR>
</UL>
<LI><B>個別ID機能</B> (ON/OFF可)<BR>
<UL>
cookie機能を応用した 個別ID機能 を搭載しています。<BR>
これはランダムな8文字の英数字を与えることにより、他人に成りすますことを防ぐ機能です。<BR>
*)ブラウザのcookie機能がONになっていなければ投稿できません。<BR>
*)携帯端末からの書き込みは機種名になります。<BR>
<BR>
</UL>
<LI><B>メール通知機能</B> (ON/OFF可)<BR>
<UL>
投稿者に書き込んだスレッドに関連する返信記事をメールで通知します。メールアドレスを非公開にすることもできます。<BR>
管理者には、投稿されたすべての記事をメールで通知します。<BR>
*) 要 semdmail 機能<BR>
<BR>
</UL>
<LI><B>パスワードでの書きこみ、閲覧制限</B> (ON/OFF可)<BR>
<UL>
パスワードで書き込み/閲覧制限、書き込みのみ制限いずれかをおこなうことができます。<BR>
<BR>
</UL>
<LI><B>多目的に利用できる3つのフォーム</B> (それぞれ ON/OFF可)<BR>
<UL>
cookie対応も可能、親記事のみ/もしくは全記事に利用、3パターンの表示される位置設定など多彩な利用が可能なセレクトフォーム、テキストフォームがひとつずつ設置できます。<BR>
また、管理者のみチェック機能、チェック後レス禁止機能のある、多目的に使えるチェックボックス機能(返信記事のみ)も、利用できます。<BR>
<BR>
</UL>
<LI><B>アイコン/文字色/枠線色選択機能・発言ランキング機能</B> (それぞれ ON/OFF可)<BR>
<UL>
それぞれの記事に個性を加える、アイコン画像、文字色と枠線色の選択ができる機能を搭載。<BR>
アイコンには、ランダム機能や、管理者専用アイコン機能などが付いています。<BR>
また発言(投稿)するたびにカウントされ、それを元にランキング表示をおこないます。レベルも設定可能です。<BR>
<BR>
</UL>
<LI><B>管理上の便利機能</B><BR>
<UL>
<LI>IPアドレスの取得、指定アドレス排除機能搭載。オンラインからでも排除IPアドレスを追加可能です。荒らし対策に。<BR>
<LI>使用禁止文字列を設定可能。オンラインからでも禁止文字列を追加できます。しつこい宣伝対策に(宣伝URLを禁止に)。<BR>
<LI>バックアップ機能があります(ON/OFF可)。バックアップを一定の期間ごとに保存します。ログが消失してもある程度修復可能です。<BR>
<LI>返信数の制限できます(ON/OFF可)。あまりに長く続くスレッドによる、ログの圧迫を防ぎます。<BR>
<LI>文字数制限機能があります(ON/OFF可)。ログの圧迫や、イタズラをある程度防ぎます。<BR>
<LI>I-BOARDシリーズ/UPP-BOARDのログコンバート可能です。ボタンひとつで ChildTree 用のログに変換します。<BR>
<LI>マルチ設定機能があります。ひとつのCGIで複数の掲示板を運営できます。<BR>
<LI>カウンタ機能搭載(ON/OFF可)。どれくらいの人が掲示板に訪れているかがある程度分かります。<BR>
<LI>ファイル表示許可機能を応用した、コメント表示許可機能を搭載(ON/OFF可)。管理者が確認してから表示許可を与えることにより、<BR>
不適切な内容のコメントを表示しません。<BR>
<LI>過去ログ機能(ON/OFF可)により、記事資産を保存、有効に活用できます。<BR>
</UL>
<BR>
<LI><B>投稿者の便利機能</B><BR>
<UL>
<LI>タグ使用を可能にできます(ON/OFF可)。禁止文字列機能と合わせることにより、使用禁止タグも設定できます。<BR>
<LI>図表モードがあります。等幅フォントでないと表現できない文章や、アスキーアートなどを簡単に利用できます。<BR>
<LI>検索機能により、ログ内にある同じような質問記事がないか、前にどのような発言をしたかなどを探して確認できます。<BR>
<LI>過去ログを、現在ログと同じようの表示できます(書き込むことはできません)。<BR>
<LI>プレビュー機能により、発言する前にどのように表示されるかを確認できます(ファイルアップ時は利用不可)。<BR>
<LI>No記事指定機能があり、Noxxx (x は半角数字) とコメント内に入れるとその記事にリンクします。<BR>
また、Noxxx,yyy,zzz で、複数記事へのリンク、 Noxxx-yyy で xxx〜yyy までの記事へのリンクを自動で表示します。<BR>
<BR>
</UL>
<LI><B>v7.0未満を利用していたユーザの方</B><BR>
<UL>
　こちらの制作上の仕様のミスにより一定の文字が利用できない不具合がありました(−/ポ 等)。 v7.0にてログ形式を少し変更したので今後こういった不具合は起こらないようにしました。<BR>
　と、上記のようにログ形式を少し変更したので今までの利用者の方はログの修復の必要があります。 その方法は管理モードに入り[フリーフォーム修復]を実行していただければOKです。<BR>
　なお、今までChildTreeを利用していない方は関係ないのでそのままお使いください。<BR>
<BR>
</UL>
<LI><A NAME="s"><B>動作サンプル</B> (オンライン)<BR>
<UL>
<B><A HREF="http://www.cj-c.com/sp/">Sample(tree)</A></B>(サポートBBS/<FONT COLOR="#ff0000">テスト不可</FONT>)<BR>
<B><A HREF="http://www.cj-c.com/sp/cf.html">Sample(topic)</A></B>(HP Q&amp;A掲示板/<FONT COLOR="#ff0000">テスト不可</FONT>)<BR>
<BR>
<B><A HREF="http://www.cj-c.com/sp/cbbs.cgi?no=2">Sample(fileup)</A></B>(ファイルアップテスト用BBS)<BR>
</UL>
<BR>
</UL>
<P>
<BR>
<A NAME="dl"><DIV ALIGN=LEFT><B>■ ダウンロードと規約</B> <A HREF="#top">▲</A></DIV><BR>
ダウンロードが完了したら<B>解凍</B>してください。念のためこのページも保存することをオススメします。<BR>
このCGI はフリーですが規定通りに使ってください。オリジナルスクリプトです。ということは、著作権欄を消さない限り再配布自由です。<BR>
Readme.txtもご覧ください。<BR>
</P>
<UL>
<B><A HREF="http://www.cj-c.com/setumei.htm">利用規約</A></B><BR>
</UL>
<P>
<BR>
<A NAME="file"><DIV ALIGN=LEFT><B>■ ファイル確認</B> <A HREF="#top">▲</A></DIV><BR>
解凍したあと、以下のファイルがきちんとあるか確認してください。<BR>
</P>
<UL>
<LI>cbbs.cgi -メインプログラム<BR>
<LI>set.cgi -設定ファイル<BR>
<LI>srch.cgi - 検索 ＆過去ログ表示<BR>
<LI>cbbs.dat - メインログ<BR>
<LI>ccount.dat - カウンタログ<BR>
<LI>jcode.pl - 漢字コードライブラリ<BR>
<LI>rank.dat - 投稿ランクログ<BR>
<LI>cbbs.htm - このページによく似たマニュアル<BR>
<LI>klog.log - 過去ログカウント<BR>
<LI>Readme.txt - 簡易説明書<BR>
<LI>[file] -フォルダ(サンプル画像入り)<BR>
<LI>[icon]-フォルダ(サンプルアイコン入り)<BR>
<LI>***.gif - 各種ヘッダ画像/アイコン画像<BR>
</UL>
<P>
<BR>
<A NAME="set"><DIV ALIGN=LEFT><B>■ 設定変更</B> <A HREF="#top">▲</A></DIV><BR>
<B>最小限</B>の設定変更の説明です。メモ帳などのエディタで[ cbbs.cgi/srch.cgi ]のファイルを開いてください。<BR>
<BR>
<FONT COLOR="#ff0000"><B>1行目</B></FONT><BR>
</P>
<UL>
#!/usr/local/bin/perl<BR>
</UL>
<P>
これを正しいパスに書きなおしてください。だいたいのサーバではこのままでOKです。<BR>
<BR>
<CENTER><HR SIZE=1 WIDTH=100%>次に[ set.cgi ]をメモ帳などのエディタで開いてください。以下出てくる行数はすべて set.cgi です。</CENTER><BR>
<BR>
<FONT COLOR="#ff0000"><B>11行目</B></FONT><BR>
</P>
<UL>
$backurl=&quot;../index.html&quot;;<BR>
</UL>
<P>
HOMEのリンク先です。つまりは戻るURLです。<BR>
<BR>
<BR>
<FONT COLOR="#ff0000"><B>12行目</B></FONT><BR>
</P>
<UL>
$pass = &quot;7777&quot;;<BR>
</UL>
<P>
管理用パスワードです。変更してください。<BR>
<BR>
<A NAME="test"><DIV ALIGN=LEFT><B>■ サーバに送る</B>（テスト設置）<A HREF="#top">▲</A></DIV><BR>
基本設定ができたら、サーバに送りましょう。ここでは[ public_html ]の下に<BR>
[ cbbs ]というディレクトリを作ってそこに送るという仮定で説明します。<BR>
</P>
<PRE>[public_html]┐
             ├ [cbbs] ┐（ロック/過去ログ/バックアップ/ログ自動生成機能を使う場合 [777 or 755]）
             │        ├ cbbs.cgi   [755]（このファイルにリンクします）
             │        ├ cbbs.dat   [666]
             │        ├ set.cgi    [755]
             │        ├ srch.cgi   [755]
             │        ├ jcode.pl   [755] (このファイルは他のCGIと共有できます)
             │        ├ ccount.dat [666] (このファイルはカウンタ機能を使う時必要)
             │        ├ rank.dat   [666] (このファイルは発言ランクを使うとき必要)
             │        ├ klog.log   [666] (このファイルは過去ログ機能を使う時必要)
             │        ├ [file] ┐(パーミッション[777]/ファイルをアップするディレクトリ/機能を使う場合)
             │        │        ├ *.gif / *.gif... (各ファイル形式の画像)
             │        │        ├ all.gif/hed.gif/new.gif/uph.gif（初期設定のまま画像でヘッダを指定する時）
             │        │        └ index.html (空でも良いのでなるべく入れて下さい)
             │        └ [icon] ┐(アイコン機能を使う場合)
             │        　        ├ *.gif / *.gif... (各アイコンの画像)
             │        　        └ index.html (空でも良いのでなるべく入れて下さい)
             │
             └ index.html</PRE>
<P>
[　]内の数字は送るときの<B>パーミッション</B>です。<BR>
<TABLE BORDER>
<TR>
<TH>
ファイル名
</TH>
<TD>
モード
</TD>
<TD>
パーミッション
</TD></TR>
<TR>
<TH>
ファイルアップフォルダ
</TH>
<TD>
<BR></TD>
<TD>
777 or 755
</TD></TR>
<TR>
<TH>
cbbs.cgi/srch.cgi/set.cgi/jcode.pl
</TH>
<TD>
アスキー（テキスト）
</TD>
<TD>
755
</TD></TR>
<TR>
<TH>
cbbs.dat/ccount.dat/klog.log/rank.dat
</TH>
<TD>
アスキー（テキスト）
</TD>
<TD>
666
</TD></TR>
<TR>
<TH>
*.gif
</TH>
<TD>
バイナリー
</TD>
<TD>
特に無し
</TD></TR></TABLE><BR>
<BR>
<A NAME="hed"><DIV ALIGN=LEFT><B>■ 記事タイトルのヘッダを指定</B> <A HREF="#top">▲</A></DIV><BR>
ツリー表示の際の記事タイトルの前につくヘッダを指定します。<BR>
<BR>
<B>サンプルの場合</B><BR>
<FONT COLOR="#ff0000"><B>68〜71行目</B></FONT><BR>
</P>
<PRE>$hed_i= '&lt;img src=&quot;file/hed.gif&quot; height=15 width=15 border=0 alt=&quot;Nomal&quot;&gt;';
$new_i= '&lt;img src=&quot;file/new.gif&quot; height=15 width=15 border=0 alt=&quot;New&quot;&gt;';
$all_i= '&lt;img src=&quot;file/all.gif&quot; height=16 width=16 border=0 alt=&quot;All&quot;&gt;';
$up_i_= '&lt;img src=&quot;file/uph.gif&quot; height=15 width=15 border=0 alt=&quot;UpDate&quot;&gt;';</PRE>
<DL>
<DD>として、それぞれの画像を[file]ディレクトリにアップしています<BR>
</DL>
<P>
<BR>
他にもそのままテキストで表現してしまうこともできます。<BR>
<FONT COLOR="#ff0000"><B>68〜71行目</B></FONT><BR>
</P>
<PRE>$all_i= '■';
$hed_i= '□';
$new_i= 'Ｎ';
$up_i_= 'UP';</PRE>
<DL>
<DD>とやると、親記事の先頭に ■ 各記事の先頭に □ 新着記事の先頭に Ｎ アップデート記事に UP が表示されます。<BR>
</DL>
<P>
<BR>
<A NAME="cb"><DIV ALIGN=LEFT><B>■ 解決済みチェックボックスの使用法</B> <A HREF="#top">▲</A></DIV><BR>
例えば質問コーナーで答えがわかったらその記事のよこに OK! と表示したり、<BR>
オークションだったら売約済みになったら記事のよこに 契約完了 といった表示を簡単に実現する。<BR>
<BR>
<B>サンプルの場合</B><BR>
<FONT COLOR="#ff0000"><B>75〜88行目</B></FONT><BR>
</P>
<PRE>$end_f = 1;
$end_c = 0;
$end_e = 0;

# チェック時、表示する物(タグ可 画像の時は&lt;img&gt;タグ)
$end_ok= '&lt;font color=red&gt;解決済み!&lt;/font&gt;';

# チャックを促すコメント(例: 解決したらチェック！)
$end_m =&lt;&lt;&quot;_END_&quot;;

&lt;font color=red&gt;&lt;small&gt;解決したらチェックしてください!&lt;/small&gt;&lt;/color&gt;

_END_</PRE>
<DL>
<DD>使用目的は質問の謎が解けたら 解決済み! と表示する、という感じ。<BR>
<DD>$end_f を 1 にすればチェックボックスがレスフォームに表示され 0 だと表示されない。<BR>
<DD>$end_c を 1 にすると、管理モードの編集作業からしかチェックができなくなる（イタズラ防止）<BR>
<DD>$end_e を 1 にすると、解決記事は返信不可になります。<BR>
<DD>チェックすると $end_ok を表示する。タグも使えるので&lt;img&gt;タグで画像も指定できる。<BR>
<DD>チェックを促すコメントのところはタグも使えます。内容はチェックボックスのよこに表示されます。<BR>
</DL>
<P>
<BR>
<A NAME="log"><DIV ALIGN=LEFT><B>■ 過去ログ機能</B> <A HREF="#top">▲</A></DIV><BR>
この掲示板は過去ログ機能があります。<BR>
<BR>
<FONT COLOR="#ff0000"><B>202〜205行目</B></FONT><BR>
</P>
<PRE>$klog_s= 0;
$klog_c= &quot;./klog.log&quot;;
$klog_d= &quot;.&quot;;
$klog_l= 100;</PRE>
<UL>
使用する場合は $klog_s を 1 にしてください。 $klog_d で過去ログを作るディレクトリを指定します。<BR>
$klog_l で過去ログの一つのファイルの限度サイズKB（キロバイト）数でを指定します。<BR>
（例えば 1.txt が100KBを越えたら 2.txt を生成しそっちに記録する）<BR>
</UL>
<P>
<FONT COLOR="#ff0000">*) 過去ログ機能を使用するときは過去ログを生成するディレクトリのパーミッションを[ 777（もしくは755） ]に設定してください。</FONT><BR>
<FONT COLOR="#ff0000">*) v4.1以上にバージョンアップの際、過去ログ機能の方式を通常ログと同時書きこみ→通常ログから削除時に書きこみへ変更したため、過去ログの記事がかぶる場合があります!</FONT><BR>
<FONT COLOR="#ff0000">*) v4.0以前に生成された過去ログは v8.0 ではツリー/スレッド表示で正しく表示されません! トピック表示で見てください!</FONT><BR>
</P>
<UL>
<B>記事保持数100の場合</B><BR>
<UL>
v4.0以前-&gt;v4.1に移行した場合...現在までの親記事NO.200 通常ログにNO.100〜200、過去ログにNO.0〜200<BR>
→よって、4.1ではNO.100〜200をまた書いてしまうためNO.100〜200記事が重なります。対処法として、過去ログ機能を1時停止して、記事を調整する（NO.201の書きこみが最下部にくるまで中止）、過去ログからNO.100〜200を削除するのどちらかが有効です。<BR>
<BR>
</UL>
過去ログの記事がかぶって良い場合は気にしなくてもOKですが…(^^;<BR>
</UL>
<P>
<BR>
<A NAME="mail"><DIV ALIGN=LEFT><B>■ メール通知機能 </B><A HREF="#top">▲</A></DIV><BR>
この掲示板は投稿があるとメールで通知する、レス記事を投稿者の任意で送信するという機能があります。<BR>
<FONT COLOR="#ff0000">*) この機能はsendmailが使えるサーバでしか使えません。sendmailが使えるかどうかは直接サーバ管理者にお問い合わせください。</FONT><BR>
<BR>
<FONT COLOR="#ff0000"><B>146〜151行目</B></FONT><BR>
</P>
<PRE>$t_mail= 0;
$mymail= 0;
$mailto= 'user@host.ne.jp';
$o_mail= 0;
$s_mail= '/usr/lib/sendmail';
$q_mail= 0;</PRE>
<UL>
$t_mail の 0 を 1 に変えると投稿すべてを管理者に投稿機能が働くようになります。<BR>
$mymail を 1 にすると自分の投稿もメールで通知されますが 0 だと自分の投稿は自分に通知されません。<BR>
（メールアドレス記入欄に通知するアドレスと同じアドレスを記入した場合）<BR>
$mailto は通知をするメールアドレスです。あなたのメールアドレスをいれるとこです。カンマ(,)で区切っていくつも指定できます。<BR>
$o_mail を 1 にすると投稿者の任意でレス記事のメールの受信を設定できるようになります。<BR>
$s_mail はsendmailパスです。だいたいのサーバはこのままでOKですが、一応サーバ管理者にお問い合わせください。<BR>
$q_mail は sendmail互換のqmailの場合にカンマを半角の空白に置き換えます。<BR>
</UL>
<P>
<BR>
<A NAME="titile"><DIV ALIGN=LEFT><B>■ タイトルを画像にする </B><A HREF="#top">▲</A></DIV><BR>
タイトルに画像を使う事ができます。<BR>
<BR>
<FONT COLOR="#ff0000"><B>21行目</B></FONT><BR>
</P>
<PRE>$t_img = &quot;&quot;;</PRE>
<UL>
ここにURLで画像のある場所を指定してください。縦と横のサイズ指定も忘れずに。すると題名の部分が画像に置きかえられます。<BR>
</UL>
<P>
<BR>
<A NAME="count"><DIV ALIGN=LEFT><B>■ カウンタを画像にする</B> <A HREF="#top">▲</A></DIV><BR>
カウンタに画像をつかうこともできます。<BR>
<BR>
<FONT COLOR="#ff0000"><B>158行目</B></FONT><BR>
</P>
<PRE>$cou  = 0;</PRE>
<UL>
ここを 0 にするとカウンタ機能は働きません。 1 にすると動きます。カウンタに画像を使うには、<BR>
</UL>
<PRE>0.gif / 1.gif 〜 8.gif / 9.gif</PRE>
<UL>
のファイルを用意して 92行目 $m_pas に指定（最後のスラッシュ(/)は省く）したディレクトリにアップすればOK。縦と横のサイズもきちんと指定しておきましょう。<BR>
</UL>
<P>
<BR>
<A NAME="tag"><DIV ALIGN=LEFT><B>■タグを使用可能にする</B> <A HREF="#top">▲</A></DIV><BR>
タグ（&lt;a&gt;&lt;font&gt;&lt;img&gt;&lt;b&gt;&lt;i&gt;など）を使用可能にできます。<BR>
<BR>
<FONT COLOR="#ff0000"><B>49行目</B></FONT><BR>
</P>
<PRE>$tag  =  0;</PRE>
<UL>
ここの 0 を 1 にするとタグを使う事が出きるようになります。<BR>
</UL>
<P>
<BR>
<A NAME="backup"><DIV ALIGN=LEFT><B>■ バックアップ機能を使う</B> <A HREF="#top">▲</A></DIV><BR>
ログ消失対策にバックアップをとります。<BR>
<BR>
<FONT COLOR="#ff0000"><B>172/173行目</B></FONT><BR>
</P>
<PRE>$bup  =  0;
$bup_f= &quot;./cbbs.bak&quot;;</PRE>
<UL>
$bup に値を入れると、その日数が経過するたびに、$bup_f にバックアップをとります。<BR>
バックアップは管理モードから手動でおこなうことも可能で、管理モードから、次のバックアップまでの時間も表示します。<BR>
1 → 1日ごと / 0.1 → 約2時間30分ごと / 0.5 → 12時間ごと ... といった設定が可能です。<BR>
自動でファイルを作るのでファイルをアップする必要はありません。<BR>
<FONT COLOR="#ff0000">*) もう一つログを取得するので合計で約2倍の容量になります。</FONT><BR>
<FONT COLOR="#ff0000">*) ファイルを生成するディレクトリのパーミッションを [777 or 755] に設定してください</FONT><BR>
</UL>
<P>
<BR>
<A NAME="fileup"><DIV ALIGN=LEFT><B>■ ファイルアップ機能 </B><A HREF="#top">▲</A></DIV><BR>
この掲示板の特徴であるファイルアップ機能を使う場合は、<BR>
<BR>
<FONT COLOR="#ff0000"><B>219〜225行目</B></FONT><BR>
</P>
<PRE>$i_mode= 1;

# ●相対パス/絶対パスでファイルアップする場所(ファイルアップ用)
$i_dir = &quot;./file&quot;;

# ●http:// のURLでファイルアップする場所(ファイル表示用)
$i_Url = &quot;http://www.---.com/cgi-bin/cbbs/file&quot;;</PRE>
<UL>
$i_mode を 1 から 0 にするとファイルアップ機能は使いません。<BR>
$i_dir ファイルアップするディレクトリです。最後の スラッシュ（/） は入れないでください。<FONT COLOR="#ff0000">必ず相対パスか / からの絶対パスで指定します。</FONT><BR>
$i_Url はhttp://〜のURLで、$i_dir を指定します。ファイル表示用のURLなのでCGI起動パスなどではありません。<BR>
<BR>
　アップ可能ファイル形式はおそらくどんなのでも指定できると思いますが、サーバの設定、ブラウザのプラグイン等によってはアップできても表示は無理かもしれません。<BR>
　問題無く追加できると思われるほかの拡張子 .pdf/.sit/.cab/.htm/.html/.mp3/.mpeg/.rar/.bmp等<BR>
　また、通信環境などによっては大きなファイルが正常にアップできない場合があります。<BR>
</UL>
<P>
<BR>
<A NAME="hrank"><DIV ALIGN=LEFT><B>■ 発言ランクを使う </B><A HREF="#top">▲</A></DIV><BR>
名前を元に、投稿回数を数えた発言ランク機能が使えます。<BR>
<BR>
<FONT COLOR="#ff0000"><B>182〜193行目</B></FONT><BR>
</P>
<PRE>$M_Rank= 1;
$RLOG = &quot;./rank.dat&quot;;
$RDEL = 30;
$RBEST = 30;

# ●レベル設定 右に行くほど高い(設定しない場合は空行 @RLv=(); にする)
@RLv = (&quot;一般人&quot;,&quot;付き人&quot;,&quot;軍団&quot;,&quot;ファミリー&quot;,&quot;ベテラン&quot;,&quot;大御所&quot;);
$RSPL  = 50;
$RGimg = &quot;&quot;;
$RGhei = 7;
# ●ランク外にする人の名前(ない場合は空行 @NoRank=(); にする)
@NoRank= (&quot;管理人の名前&quot;,&quot;りゅういち&quot;);</PRE>
<UL>
$M_Rank を 1 にすると発言ランク機能が使えます。<BR>
$RLOG は発言ランクを記録するログファイルまでのパスです。同じディレクトリにログを入れる場合はこのままでOKです。<BR>
$RDEL は発言をランクから削除する日数を指定します。<BR>
$RBEST は発言ランクで表示するランキングの人数を指定します。<BR>
@RLv はレベルの設定です。回数が多いほど右のレベルになっていきます。<BR>
$RSPL はレベルアップの区切り単位です。50だと50回で一般人から付き人へ、100回で付き人から軍団になれます。<BR>
$RGimg はランク表示の際のグラフを画像にできます。http://〜のURLでファイルを指定してください。$RGhei の縦幅も忘れずに指定してください。<BR>
@NoRank はランクから、はずす人の名前を指定します。<BR>
<BR>
<FONT COLOR="#ff0000">*) 記事には書き込んだ時点の回数、レベルが表示されます!</FONT><BR>
</UL>
<P>
<BR>
<A NAME="multi"><DIV ALIGN=LEFT><B>■ マルチ設定機能 </B><A HREF="#top">▲</A></DIV><BR>
設定ファイルを複数作り、ひとつのCGIで複数の掲示板を管理できます。<BR>
まず、set.cgi と同じような設定ファイルを作ってサーバにアップして下さい（パーミッションは755）。例 set1.cgi<BR>
それを cbbs.cgi / srch.cgi の設定箇所に設定します。例 $set[*]=&quot;./set1.cgi&quot;;（*は連番で指定してください）<BR>
それで設定は完了。 $set[*] の * を no に指定してアクセスします。<BR>
</P>
<UL>
例) http://www.sample.com/cbbs.cgi?no=*<BR>
</UL>
<P>
また、srch.cgiに直接リンクをする場合も同様にしてください(cbbs.cgi経由で見る場合は問題ありません)<BR>
</P>
<UL>
例) http://www.sample.com/srch.cgi?no=*<BR>
</UL>
<P>
ログファイル(cbbs.dat等)や過去ログ生成ディレクトリは設定ファイル毎に変更しましょう。<BR>
新しいログファイルは自動で生成されます（その際ログファイルを生成するディレクトリのパーミッションは777or755）<BR>
<BR>
<A NAME="icon"><DIV ALIGN=LEFT><B>■ アイコン機能と文字色・枠線色選択機能 </B><A HREF="#top">▲</A></DIV><BR>
記事ごとにアイコンを表示します。設定によってはツリー/トピックのタイトル横に小さい画像を表示します<BR>
<BR>
<FONT COLOR="#ff0000"><B>311〜316行目</B></FONT><BR>
</P>
<PRE>$Icon = 0;
$IconDir= &quot;./icon&quot;;

@ico1 = ('rob6.gif','rob2.gif','panda.gif','neko2.gif','mouse.gif','coara.gif','qes.gif','randam','master');
@ico2 = ('ホイールロボ','くるりロボ','ぱんだ','ふとめネコ','ねずみ','こあら','疑問ねこ','ランダム','管理者用');
@ico3 = ('rob6_m.gif','rob2_m.gif','panda_m.gif','neko2_m.gif','mouse_m.gif','coara_m.gif','qes_m.gif','randam','master');</PRE>
<P>
$Iconを 1 にするとアイコン機能が使用できるようになります。<BR>
$IconDir はアイコンの置いてあるディレクトリを指定します。URLでもOKです。最後のスラッシュは省きます 例) http://www.cj-c.com/bbs/icon<BR>
@ico1 はアイコン画像のファイル名を記入します。randam master と指定するとランダム機能と管理者専用アイコン機能が使えます。<BR>
@ico2 はアイコン画像の名前を記入します。ねこ、いぬ等です。@ico1 と同じ数でなければなりません。<BR>
@ico3 はツリー/トピック表示でタイトル横に表示するミニアイコンです。ない場合は @ico3=(); と設定してください。<BR>
<BR>
文字色・枠線色は設定ファイルの設定に従ってください（16進数で指定してください）。<BR>
<BR>
<A NAME="etc"><DIV ALIGN=LEFT><B>■ その他</B> <A HREF="#top">▲</A></DIV><BR>
</P>
<UL>
<B>・http://.../cbbs/cbbs.cgi?mode=all_v でアクセスすると...</B><BR>
<UL>
全設定ファイルの更新状況がトピック表示で表示されます。<BR>
</UL>
<BR>
<B>・ブラウザOperaでツリー表示が崩れる場合</B><BR>
<UL>
-&gt;対応策:罫線のスペース設定を $K_SP='&amp;nbsp;&amp;nbsp;'; とする（現バージョンは最初から設定されています）。<BR>
</UL>
<BR>
<B>・I-BOARD/UPP-BOARDログコンバートの方法</B><BR>
<UL>
コンバートしたいログを set.cgi の記録ファイルに指定、管理モードからボタンを押せば完了です。<BR>
例) $log=&quot;./ibbs.dat&quot;;<BR>
</UL>
<BR>
・わからない、設置できない、バグがでた、などの情報は<B><A HREF="http://www.cj-c.com/sp/">サポート掲示板</A></B>までお願いします。<BR>
<BR>
<TABLE CELLPADDING=5 BGCOLOR="#ffffff">
<TR>
<TH COLSPAN=3 BGCOLOR="#cfff9b">
改造配布サイトの紹介
</TH></TR>
<TR>
<TD>
<B>ChildTreeレンタル向け</B><BR>
<A HREF="http://labo.kiryuu.cx/">霧生ウェブ研究所</A>
</TD>
<TD>
<B>ChildTreeデザイン強化版</B><BR>
<A HREF="http://mo-mo.vis.ne.jp/">Mo-Mo</A>
</TD>
<TD>
<B>ChildTree携帯向けオプション</B><BR>
<A HREF="../../cj_c/cgi_s/ck.htm">Child K-Tai</A>
</TD></TR>
<TR>
<TD>
<B>ChildTree KAI</B><BR>
(スレッド表示をツリー階層表示)<BR>
<A HREF="http://whoo.cool.ne.jp/index.shtml">whoo's lab</A>
</TD>
<TD>
<BR></TD>
<TD>
<BR></TD></TR></TABLE><BR>
<BR>
<LI><B>更新履歴</B><BR>
<LI>00/01/16 v1.0-配布開始<BR>
<LI>00/07/25 v3.0-レスがあってもトップに行かない設定の時の不具合修正、チェック機能の充実<BR>
<LI>00/08/17 v3.1-削除処理の際の不具合修正<BR>
<LI>00/08/31 v3.2-削除の際の不具合修正、新着記事のソート<BR>
<LI>00/09/26 v3.3-解決済みの投稿者編集、記事全文表示、新着ソート形式の選択<BR>
<LI>00/10/29 v4.0-図表モード追加、投稿者メール通知機能、記事引用の形式選択等の機能追加等<BR>
<LI>00/11/01 v4.1-子記事の配列の修正と過去ログ方式の変更<BR>
<LI>00/12/02 v4.2-細かい不具合修正<BR>
<LI>01/06/24 v4.3-レス記事が新しいほど上に行ってしまうのを変更、proxyサーバからの書き込み制限機能<BR>
<LI>01/07/05 v4.4-削除記事がツリー一覧から見えないのを修正、親記事でも編集で解決済みBOXをチェックできてしまうのを修正<BR>
<LI>02/01/08 v5.0-ツリー一括削除がうまく働かないのを修正、発言ランク機能の強化、ファイルアップ機能搭載、その他機能の強化と修正(cbbs.cgiとsrch.cgiと設定ファイルをアップ)<BR>
<LI>02/01/12 v5.1-ランキングの不具合修正(cbbs.cgiのみアップ)<BR>
<LI>02/01/19 v5.2-長い記事がうまく投稿できないのを修正、トピック表示で最終更新日と投稿者が返信状態によってうまく表示されないのを修正(cbbs.cgiをアップ)<BR>
<LI>02/01/29 v5.3-新着記事の改ページにミスがあったのを修正、記事数ソート機能を追加。(cbbs.cgiをアップ)<BR>
<LI>02/02/01 v5.4-スレッド表示で記事リストをOFFにするとレスが表示されないのを修正。(cbbs.cgiをアップ)<BR>
<LI>02/02/04 v5.5-1KB未満のファイルがトピック表示で表示されないことがあるのを修正、表示の効率化(cbbs.cgiをアップ)<BR>
<LI>02/02/06 v5.6-「解決済み」が新着記事でうまく表示されないのを修正、設定されている掲示板の記事リストを一括に表示する機能追加(cbbs.cgiをアップ)<BR>
<LI>02/02/10 v5.7-スレッド、トピック表示からレスするとツリーがずれることがあるのを修正(cbbs.cgiをアップ)<BR>
<LI>02/02/13 v5.8-罫線非表示の際、管理モードでレス記事が表示されないのを修正、トピック表示の設定で記事初期配列が変更されないのを修正(cbbs.cgiをアップ) <BR>
<LI>02/02/25 v5.9-古い記事が現在ログにあるとソートがうまくいかないのを修正(cbbs.cgiをアップ)<BR>
<LI>02/04/15 v6.0-アイコン機能追加、文字色・枠線色選択機能追加、フリーセレクト/テキストフォーム(各1個)の追加、文字数制限機能の追加等、不具合の修正と見直し(srch.cgi/cbbs.cgi/set.cgi をアップ)<BR>
<LI>02/04/29 v6.1-制限記事数機能がトピック機能で記事順を逆にすると働かなかったのを修正(cbbs.cgiのみアップ)<BR>
<LI>02/05/17 v6.2-携帯端末アイコン機能追加、トピック表示で配列設定によっては正しく動かなかったのを修正(cbbs.cgi/set.cgiをアップ)<BR>
<LI>02/05/21 v6.3-アイコン機能がOFFでも携帯端末アイコン機能が働いてしまうのを修正(cbbs.cgiをアップ)<BR>
<LI>02/06/04 v6.4-No*** リンクで現在ログに記事がない場合、過去ログにリンクする機能を追加(cbbs.cgiをアップ) <BR>
<LI>02/08/05 v7.0-プレビュー機能、カウンタ値編集機能、I-BOARD/UPP-BOARDログコンバート機能追加、編集モードからファイルアップ、記事リストの最大表示数の指定、アイコンサンプルページの分割可能化、 記事を引用しない設定がスレッド表示で反映されないのを修正、フリーテキスト/セレクトフォームの文字コード上の不具合の修正(以前より使っている場合は管理モードより修復作業が必要です)、その他不具合修正(cbbs.cgi/set.cgiをアップ)<BR>
<LI>02/08/08 v7.1-プレビュー機能を使った際、管理用アイコンがうまく反映されないのを修正、テキストフォームを親記事のみ利用にし、書き込み必須にした際、レス記事がかけないのを修正(cbbs.cgiをアップ)<BR>
<LI>02/08/10 v7.2-編集の際、管理者アイコンが利用できなかったのを修正(cbbs.cgiをアップ)<BR>
<LI>02/09/15 v7.3-アイコンのファイル名に no数字 が入っているとリンクしてしまうのを修正、ファイルアップ一覧で改ページするよう修正(改ページ個数はアイコンの改ページ個数設定と同じ個数)。(cbbs.cgiのみアップ)<BR>
<LI>02/09/18 v7.4-コメントの一行目が引用されないのを修正、メール非通知非公開でも、管理者書き込みと判断するよう修正(cbbs.cgiのみアップ)<BR>
<LI>02/12/12 v7.5-ChildTree v7.5 をアップ。親記事投稿者のみレス可能設定のとき編集できないのを修正、検索に引っかかる空記事に返信できてしまうのを修正(cbbs.cgi/srch.cgiのみアップ)<BR>
<LI>03/01/06 v7.6-過去ログを使用しない場合、アップファイルが古い記事と一緒に削除されないのを修正(削除されていないファイルはFTPから削除してください/cbbs.cgiのみアップ)<BR>
<LI>03/01/30 v7.7-編集時にその旨と時間を追加するように(cbbs.cgiのみアップ)<BR>
<LI>03/03/11 v8.0-全体的な表示処理の効率化、オンラインから排除IP/禁止文字列が追加できる機能、過去ログを現在ログと差異なく閲覧できるよう変更、全過去ログ検索を一定数検索したら中断するよう変更、ID機能/記事任意ソート機能搭載、スレッド記事リストにも NEW/UP アイコン表示、記事No指定表示機能強化、バックアップ方式の変更等、その他不具合など修正(cbbs.cgi/srch.cgi/set.cgi をアップ)<BR>
<LI>03/03/13 v8.1-ツリー返信の際ツリーが崩れることがあるのを修正、管理モードにもID表示するよう変更、タグメッセージ表示変更(cbbs.cgiのみアップ)<BR>
<LI>03/03/15 v8.2-携帯端末向けの変更(Child K-Tai v2.2以上を利用する場合、cbbs.cgiのみアップ)<BR>
<LI>03/03/26 v8.3-ツリー表示で縮小画像が表示されないことがあるのを修正、アップファイル拡張子に大文字小文字が混ざっている場合うまく表示されないのを修正(cbbs.cgiのみアップ)<BR>
<LI>03/03/30 v8.4-スレッド表示で引用返信するとツリーが崩れることがあるのを修正(cbbs.cgiのみアップ)<BR>
<LI>03/04/03 v8.5-トピック・スレッド表示でツリーが崩れることがあるのを修正、検索時現在ログがうまくリンクされないのを修正(cbbs.cgi/srch.cgiをアップ)<BR>
<LI>03/04/09 v8.6-携帯オプションから編集時 NO TITLE になるのを修正、スレッド表示でフリーフォームが正しく表示されないのを修正(cbbs.cgi のみアップ)<BR>
<LI>03/05/11 v8.7-検索で引っかかった記事ではメールアドレス非公開が適用されていないのを修正(srch.cgi をアップ)<BR>
<LI>03/07/28 v8.8-管理者が管理者パスワードを入れることにより記事の削除/編集をその記事にあるフォームから可能に、ログコンバートの記事No不具合修正など(cbbs.cgi をアップ)<BR>
<LI>03/09/04 v8.9-管理者パスワードでの編集/削除で管理モードに行かないよう変更、プレビュー利用時に記事ソートが常に「上げ」になることを修正(cbbs.cgi をアップ)<BR>
<LI>03/09/21 v8.91-トピック表示時新着記事からの引用返信でツリーがずれるのを修正、管理者パスワードで編集時スタンプに管理者が修正した旨をいれるよう修正、ランダムアイコンが表示されないことがあるのを修正、記事ソートがデフォルトで上げになるよう修正(cbbs.cgiのみアップ)<BR>
<LI>03/10/13 v8.92-検索記事表示時メール表示/非表示が逆になるのを修正、書き込みのみ認証する場合にフォームが表示されていたのを修正、プレビューでもタグが反映されるよう変更、コメント表示未許可記事の内容が引用返信しようとするとフォーム内に表示されてしまうのを修正(cbbs.cgi/srch.cgi をアップ)<BR>
</UL>
<P>
<CENTER>□<A HREF="http://www.cj-c.com/cgi_s/index_b.html"> BACK</A></CENTER><BR>
</P>
</BODY>
</HTML>